ğŸ’» API de GestÃ£o de Estoque com MÃ³dulo de Vendas
â€” Desenvolvida em Spring Boot

Este projeto consiste em uma API REST para gerenciamento de estoque, agora ampliada com um mÃ³dulo completo de Vendas, capaz de controlar automaticamente a baixa de produtos, garantir transaÃ§Ãµes consistentes e evitar inconsistÃªncias relacionadas ao estoque.

ğŸ“Œ VisÃ£o Geral

A API fornece recursos para:

Cadastro e gerenciamento de Clientes

Registro de Vendas

Controle de ItensVenda

Baixa automÃ¡tica do estoque ao concluir uma venda

Rollback em caso de falhas (ex.: estoque insuficiente)

IntegraÃ§Ã£o completa entre Cliente â†’ Venda â†’ Itens â†’ Produto

O sistema assegura que nenhuma venda seja registrada caso a quantidade solicitada ultrapasse o estoque disponÃ­vel.

ğŸš€ Requisitos

Para rodar o projeto, instale:

Java 21

Maven

PostgreSQL, MySQL ou XAMPP

âš™ï¸ ConfiguraÃ§Ã£o
1ï¸âƒ£ Clonar o RepositÃ³rio
git clone https://github.com/Bufonn/ControleEstoque-20240447.git
cd ControleEstoque-20240447

2ï¸âƒ£ Configurar o Banco de Dados

Edite:

src/main/resources/application.properties


Exemplo:

spring.datasource.url=jdbc:postgresql://localhost:5432/nome_do_seu_db
spring.datasource.username=seu_usuario
spring.datasource.password=sua_senha

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

3ï¸âƒ£ Executar a AplicaÃ§Ã£o
mvn clean install
mvn spring-boot:run


A API serÃ¡ iniciada em:

http://localhost:8080

ğŸ§­ Endpoints

Todos seguem o padrÃ£o:

/api/{recurso}

ğŸ”¹ 1. Clientes (CRUD)
MÃ©todo	Endpoint	DescriÃ§Ã£o
POST	/api/clientes	Criar novo cliente
GET	/api/clientes/{id}	Buscar cliente por ID
GET	/api/clientes	Listar clientes
PUT	/api/clientes/{id}	Atualizar cliente
DELETE	/api/clientes/{id}	Remover cliente

ğŸ“¥ Exemplo de Payload

{
  "nome": "Maria Silva",
  "email": "maria.silva@exemplo.com"
}

ğŸ”¹ 2. Vendas
Endpoint principal:
MÃ©todo	Endpoint	DescriÃ§Ã£o
POST	/api/vendas	Registra venda e realiza baixa de estoque

ğŸ“¥ Exemplo (exige produtos, fornecedores e categorias cadastrados):

{
  "clienteId": 1,
  "itens": [
    {
      "produtoId": 1,
      "quantidade": 2,
      "precoUnitario": 129.99
    },
    {
      "produtoId": 3,
      "quantidade": 1,
      "precoUnitario": 2499.99
    }
  ]
}

ğŸ”¹ 3. Produtos
MÃ©todo	Endpoint	DescriÃ§Ã£o
POST	/api/produtos	Registrar novo produto

ğŸ“¥ Exemplo:

{
  "nome": "Mouse Gamer RGB",
  "preco": 159.90,
  "categoria": { "id": 2 },
  "fornecedores": [
    { "id": 1 }
  ],
  "estoque": {
    "quantidade": 25
  }
}

ğŸ”¹ 4. Categorias e Fornecedores
MÃ©todo	Endpoint	DescriÃ§Ã£o
POST	/api/categorias	Criar categoria
GET	/api/categorias	Listar todas
GET	/api/categorias/{id}	Buscar por ID
PUT	/api/categorias/{id}	Atualizar categoria
DELETE	/api/categorias/{id}	Remover categoria
POST	/api/fornecedores	Criar fornecedor
GET	/api/fornecedores	Listar fornecedores
GET	/api/fornecedores/{id}	Buscar por ID
PUT	/api/fornecedores/{id}	Atualizar fornecedor
DELETE	/api/fornecedores/{id}	Remover fornecedor

ğŸ“¥ Exemplos:

{ "nome": "Categoria X" }

{ "nome": "Fornecedor X" }

ğŸ”¥ LÃ³gica de Estoque (Transacional)

O processo de venda Ã© executado dentro de uma transaÃ§Ã£o:

@Transactional


Isso garante que todas as operaÃ§Ãµes aconteÃ§am como um Ãºnico bloco:

âœ” Quando tudo ocorre bem:

Estoque suficiente

Venda registrada

Itens descontados corretamente

âŒ Quando ocorre erro:

Falta de estoque em qualquer item

Nenhuma alteraÃ§Ã£o Ã© aplicada

Venda nÃ£o Ã© salva

Estoque permanece intacto

O rollback Ã© acionado automaticamente

Exemplo de erro (HTTP 400):

Estoque insuficiente para o produto X.

ğŸ“¦ Tecnologias Utilizadas

Spring Boot

Spring Data JPA

Spring Web

Maven

Lombok

MySQL Driver

Java 21

Qualquer SGBD compatÃ­vel (MySQL, PostgreSQL etc.)